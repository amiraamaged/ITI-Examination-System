<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instructor Dashboard - ITI Exam System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/Screenshot_27.png') }}">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo-container">
                    <img src="{{ url_for('static', filename='images/Screenshot_27.png') }}" alt="ITI Logo" class="logo">
                    <div>
                        <div class="institute-name">Information Technology Institute</div>
                        <div class="institute-subtitle">Instructor Dashboard</div>
                    </div>
                </div>
                <nav>
                    <ul class="nav-menu">
                        <li><a href="{{ url_for('instructor_dashboard') }}">DASHBOARD</a></li>
                        <li><a href="{{ url_for('create_exam') }}">CREATE EXAM</a></li>
                        <li><a href="{{ url_for('logout') }}">LOGOUT</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Welcome Section -->
            <div class="dashboard-welcome">
                <h1>Welcome, {{ instructor_name }}!</h1>
                <p class="subtitle">Manage your courses and exams</p>
            </div>

            <!-- Quick Stats -->
            <div class="stats-container">
                <div class="stat-card">
                    <h3>My Courses</h3>
                    <p class="stat-number">{{ courses|length }}</p>
                </div>
                <div class="stat-card">
                    <h3>Total Students</h3>
                    <p class="stat-number">
                        {{ courses|selectattr('Number_of_Students')|map(attribute='Number_of_Students')|sum if courses else 0 }}
                    </p>
                </div>
                <div class="stat-card">
                    <h3>Previous Exams</h3>
                    <p class="stat-number">{{ exams|length }}</p>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="actions">
                <a href="{{ url_for('create_exam') }}" class="btn">Create New Exam</a>
                <a href="#courses" class="btn btn-secondary">View All Courses</a>
            </div>

            <!-- My Courses Section -->
            <section id="courses" class="dashboard-section">
                <h2>My Courses</h2>
                {% if courses %}
                <div class="courses-grid">
                    {% for course in courses %}
                    <div class="course-card">
                        <h3>{{ course.Course_Name }}</h3>
                        <p class="student-count">ðŸŽ“ {{ course.Number_of_Students }} Students</p>
                        <p class="instructor-name">Instructor: {{ course.Instructor_Name }}</p>
                        <div class="course-actions" >
                            <button  class="btn btn-small" onclick="createExamForCourse('{{ course.Course_Name }}')">Create Exam</button>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="no-courses">
                    <p>No courses assigned. Please contact administration.</p>
                </div>
                {% endif %}
            </section>

            <!-- Recent Exams Section -->
            <section class="dashboard-section">
                <h2>Recent Exams</h2>
                {% if exams %}
                <div class="exams-table">
                    <table>
                        <thead>
                            <tr style="text-align: center;">
                                <th>Exam Title</th>
                                <th>Course</th>
                                <th>Date</th>
                                <th>Students Taken</th>
                                <th>Total Marks</th>

                            </tr>
                        </thead>
                        <tbody>
                            {% for exam in exams %}
                            <tr>
                                <td>{{ exam.Title }}</td>
                                <td>{{ exam.Course_Name }}</td>
                                <td>{{ exam.Exam_Date }}</td>
                                <td style="text-align: center;">{{ exam.students_taken }}</td>
                                <td style="text-align: center;">{{ exam.Total_Marks }}</td>
                               
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="no-exams">
                    <p>No exams created yet. <a href="{{ url_for('create_exam') }}">Create your first exam!</a></p>
                </div>
                {% endif %}
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Information Technology Institute. All rights reserved.</p>
        </div>
    </footer>

    <script>
        function createExamForCourse(courseName) {
            window.location.href = "{{ url_for('create_exam') }}?course=" + encodeURIComponent(courseName);
        }
    </script>
</body>
</html>